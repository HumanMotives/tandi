<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Data Grave</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Styles (kebab-case, under /styles) -->
  <link rel="stylesheet" href="styles/global.css">
  <link rel="stylesheet" href="styles/burial-flow.css">
  <link rel="stylesheet" href="styles/burial-listings.css">
  <link rel="stylesheet" href="styles/upsell.css">

  <!-- reCAPTCHA & Supabase keys (unchanged) -->
  <script>
    const RECAPTCHA_SITE_KEY = '6LfLF48rAAAAANYVfuKbMf4frZIVuKQ3Y8s5rB5W';
    const SUPABASE_ANON_KEY   = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpY3hobmN1c2R5Y3FqZnRvaGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxMTg1MzksImV4cCI6MjA2ODY5NDUzOX0.z2KXaX0dv0ucLmC2ctL51vumhx3xuLcV-2ZL8UFbcxM';
  </script>
  <script src="https://www.google.com/recaptcha/api.js?render=6LfLF48rAAAAANYVfuKbMf4frZIVuKQ3Y8s5rB5W" defer></script>
</head>

  <body>
    <!-- placeholders for partials -->
    <div id="common-header"></div>
    <div id="burial-zone-placeholder"></div>
    <div id="upsell-section-placeholder"></div>
    <div id="burial-listings-placeholder"></div>
    <div id="common-footer"></div>

    <!-- your static scripts (module loader if needed) -->
    <script>
      async function loadPartial(id, url) {
        const container = document.getElementById(id);
        const res = await fetch(url);
        if (!res.ok) {
          console.error(`Failed to load ${url}: ${res.status}`);
          return false;
        }
        container.innerHTML = await res.text();
        return true;
      }

      document.addEventListener('DOMContentLoaded', async () => {
        // 1) Header & footer
        await loadPartial('common-header', 'partials/header.html');
        await loadPartial('common-footer', 'partials/footer.html');

        // 2) Burial zone → then burial-flow.js
        if (await loadPartial('burial-zone-placeholder', 'partials/burial-zone.html')) {
          const bf = document.createElement('script');
          bf.src = 'scripts/burial-flow.js';
          document.body.appendChild(bf);
        }

        // 3) Upsells → then upsells.js
        if (await loadPartial('upsell-section-placeholder', 'partials/upsell-section.html')) {
          const us = document.createElement('script');
          us.src = 'scripts/upsells.js';
          document.body.appendChild(us);
        }

        // 4) Listings → then burial-listings.js
        if (await loadPartial('burial-listings-placeholder', 'partials/burial-listings.html')) {
          const bl = document.createElement('script');
          bl.src = 'scripts/burial-listings.js';
          document.body.appendChild(bl);
        }

        // 5) Header interactivity (menu highlighting, etc):
        const hd = document.createElement('script');
        hd.src = 'scripts/header.js';
        document.body.appendChild(hd);
      });
    </script>
  </body>
</html>
