<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DEV Playback Test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: monospace; max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 0.5rem; border-bottom: 1px solid #ddd; }
    .play-btn { background:none; border:none; font-size:1.2rem; cursor:pointer; }
    .play-btn:hover { transform: scale(1.2); }
    audio { width: 100%; margin-top: 0.5rem; }
    .meta { margin-top: 0.5rem; font-size: 0.9rem; color: #555; }
  </style>
</head>
<body>

  <h1>DEV: Recent Burials with Audio</h1>

  <table>
    <thead>
      <tr>
        <th>Filename</th>
        <th>Date</th>
        <th>Country</th>
        <th>Likes</th>
      </tr>
    </thead>
    <tbody id="graveList"></tbody>
  </table>

  <script>
    // --- FAKE DEV DATA pointing at your Git file ---
    const fakeData = [
      {
        name: 'HelluvaTrackBoyz.mp3',
        timestamp: Date.now(),
        country: 'US',
        likes: 42,
        epitaph: 'Demo Epitaph üé∂',
        username: 'demoUser',
        public_url: 'projects/thedatagrave/uploads/HelluvaTrackBoyz.mp3'
      }
    ];

    function renderRows(data) {
      const tbody = document.getElementById('graveList');
      tbody.innerHTML = '';

      data.forEach(b => {
        // First row: Filename, Date, Country, Likes
        const tr1 = document.createElement('tr');
        tr1.innerHTML = `
          <td>${b.name}</td>
          <td>${new Date(b.timestamp).toLocaleDateString()}</td>
          <td>${b.country}</td>
          <td>${b.likes}</td>
        `;
        tbody.appendChild(tr1);

        // Second row: Audio player, epitaph, username, download
        const tr2 = document.createElement('tr');
        const td2 = document.createElement('td');
        td2.colSpan = 4;
        td2.innerHTML = `
          <button class="play-btn">‚ñ∂Ô∏è Play</button>
          <audio class="hidden" controls src="${b.public_url}"></audio>
          <div class="meta"><strong>Epitaph:</strong> ${b.epitaph}</div>
          <div class="meta"><strong>User:</strong> ${b.username}</div>
          <div class="meta"><a href="${b.public_url}" download>Download</a></div>
        `;
        tr2.appendChild(td2);
        tbody.appendChild(tr2);

        // wire up play button
        const playBtn = td2.querySelector('.play-btn');
        const audioEl = td2.querySelector('audio');
        playBtn.addEventListener('click', () => {
          audioEl.classList.toggle('hidden');
          audioEl.paused ? audioEl.play() : audioEl.pause();
        });
      });
    }

    // on load, render our fake data
    document.addEventListener('DOMContentLoaded', () => {
      renderRows(fakeData);
    });
  </script>

</body>
</html>
